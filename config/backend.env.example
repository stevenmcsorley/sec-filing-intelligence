# FastAPI configuration
API_HOST=0.0.0.0
API_PORT=8000
DATABASE_URL=postgresql+psycopg://filings:filings@postgres:5432/filings
REDIS_URL=redis://redis:6379/0
MINIO_ENDPOINT=http://minio:9000
MINIO_ACCESS_KEY=filings
MINIO_SECRET_KEY=filingsfilings
MINIO_SECURE=false
MINIO_REGION=
MINIO_FILINGS_BUCKET=filings-raw

# Downloader configuration
DOWNLOADER_ENABLED=true
DOWNLOADER_CONCURRENCY=2
DOWNLOADER_MAX_RETRIES=3
DOWNLOADER_BACKOFF_SECONDS=1.5
DOWNLOADER_REQUEST_TIMEOUT=30
DOWNLOADER_VISIBILITY_TIMEOUT_SECONDS=60
DOWNLOADER_REQUEUE_BATCH_SIZE=100

# Parser configuration
PARSER_ENABLED=true
PARSER_CONCURRENCY=2
EDGAR_PARSE_QUEUE_NAME=sec:ingestion:parse
PARSER_MAX_RETRIES=3
PARSER_BACKOFF_SECONDS=1.5
GROQ_API_KEY=change-me
KEYCLOAK_SERVER_URL=http://keycloak:8080
KEYCLOAK_REALM=sec-intel
KEYCLOAK_CLIENT_ID=backend
KEYCLOAK_AUDIENCE=backend
KEYCLOAK_JWKS_CACHE_TTL_SECONDS=300
OPA_URL=http://opa:8181

# Chunk planner / Groq orchestration
CHUNK_QUEUE_NAME=sec:groq:chunk
CHUNK_QUEUE_VISIBILITY_TIMEOUT_SECONDS=600
CHUNK_QUEUE_REQUEUE_BATCH_SIZE=200
CHUNK_QUEUE_PAUSE_THRESHOLD=1000
CHUNK_QUEUE_RESUME_THRESHOLD=750
CHUNK_BACKPRESSURE_CHECK_INTERVAL_SECONDS=1.0
CHUNKER_MAX_TOKENS_PER_CHUNK=800
CHUNKER_MIN_TOKENS_PER_CHUNK=200
CHUNKER_PARAGRAPH_OVERLAP=1

# Section summarizer
SUMMARIZER_ENABLED=true
SUMMARIZER_CONCURRENCY=2
SUMMARIZER_MODEL=mixtral-8x7b-32768
SUMMARIZER_TEMPERATURE=0.2
SUMMARIZER_MAX_OUTPUT_TOKENS=256
SUMMARIZER_REQUEST_TIMEOUT=30
SUMMARIZER_MAX_RETRIES=3
SUMMARIZER_BACKOFF_SECONDS=2.0
GROQ_API_URL=https://api.groq.com/openai/v1

# Groq budgeting
GROQ_BUDGET_COOLDOWN_SECONDS=60
SUMMARIZER_DAILY_TOKEN_BUDGET=
ENTITY_DAILY_TOKEN_BUDGET=
DIFF_DAILY_TOKEN_BUDGET=

# Entity extraction
ENTITY_EXTRACTION_ENABLED=true
ENTITY_CONCURRENCY=2
ENTITY_QUEUE_NAME=sec:groq:entity
ENTITY_QUEUE_VISIBILITY_TIMEOUT_SECONDS=600
ENTITY_QUEUE_REQUEUE_BATCH_SIZE=200
ENTITY_QUEUE_PAUSE_THRESHOLD=1000
ENTITY_QUEUE_RESUME_THRESHOLD=750
ENTITY_BACKPRESSURE_CHECK_INTERVAL_SECONDS=1.0
ENTITY_MODEL=llama-3.3-70b-versatile
ENTITY_TEMPERATURE=0.0
ENTITY_MAX_OUTPUT_TOKENS=512
ENTITY_REQUEST_TIMEOUT=30
ENTITY_MAX_RETRIES=3
ENTITY_BACKOFF_SECONDS=2.0

# Diff comparison
DIFF_ENABLED=true
DIFF_CONCURRENCY=2
DIFF_QUEUE_NAME=sec:groq:diff
DIFF_QUEUE_VISIBILITY_TIMEOUT_SECONDS=600
DIFF_QUEUE_REQUEUE_BATCH_SIZE=200
DIFF_QUEUE_PAUSE_THRESHOLD=1000
DIFF_QUEUE_RESUME_THRESHOLD=750
DIFF_BACKPRESSURE_CHECK_INTERVAL_SECONDS=1.0
DIFF_MODEL=llama-3.3-70b-versatile
DIFF_TEMPERATURE=0.2
DIFF_MAX_OUTPUT_TOKENS=512
DIFF_REQUEST_TIMEOUT=30
DIFF_MAX_RETRIES=3
DIFF_BACKOFF_SECONDS=2.0

# EDGAR ingestion
EDGAR_POLLING_ENABLED=true
EDGAR_USER_AGENT=Mozilla/5.0 (compatible; sec-filing-intel/0.1; support@sec-intel.local)
EDGAR_GLOBAL_FEED_URL=https://www.sec.gov/cgi-bin/browse-edgar?action=getcurrent&count=100&output=atom
EDGAR_COMPANY_FEED_BASE_URL=https://www.sec.gov/cgi-bin/browse-edgar?action=getcompany&CIK=
EDGAR_GLOBAL_POLL_INTERVAL_SECONDS=60
EDGAR_COMPANY_POLL_INTERVAL_SECONDS=300
EDGAR_COMPANY_CIKS=
EDGAR_DOWNLOAD_QUEUE_NAME=sec:ingestion:download
EDGAR_SEEN_ACCESSIONS_KEY=sec:ingestion:seen-accessions
EDGAR_DOWNLOAD_QUEUE_PAUSE_THRESHOLD=500
EDGAR_DOWNLOAD_QUEUE_RESUME_THRESHOLD=350
EDGAR_BACKPRESSURE_CHECK_INTERVAL_SECONDS=1.0
